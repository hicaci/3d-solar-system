<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å¤ªé˜³ç³»è¡Œæ˜Ÿè¿è¡Œæ¨¡æ‹Ÿå™¨ - å°å­¦ç”Ÿæ•™å­¦ç‰ˆ</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            space: '#0a0a23',
            sun: '#ffcc00',
            mercury: '#a9a9a9',
            venus: '#e6c26e',
            earth: '#6495ed',
            mars: '#ff6347',
            jupiter: '#e6b88a',
            saturn: '#f5deb3',
            uranus: '#e0ffff',
            neptune: '#4169e1',
            pluto: '#d8bfd8',
          },
          fontFamily: {
            comic: ['Comic Sans MS', 'cursive'],
          },
        },
      }
    }
  </script>
  <style type="text/tailwindcss">
    @layer utilities {
      .text-shadow {
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
      }
      .glow {
        box-shadow: 0 0 15px rgba(255, 204, 0, 0.8);
      }
      .planet-shadow {
        filter: drop-shadow(0 0 8px rgba(255, 255, 255, 0.5));
      }
      .slider-thumb {
        @apply appearance-none w-6 h-6 rounded-full bg-blue-500 cursor-pointer;
      }
      .slider-track {
        @apply appearance-none h-2 rounded-lg bg-gray-300;
      }
    }
  </style>
</head>
<body class="bg-space text-white min-h-screen font-comic">
  <div class="container mx-auto px-4 py-8">
    <!-- æ ‡é¢˜åŒºåŸŸ -->
    <header class="text-center mb-8">
      <h1 class="text-4xl md:text-5xl font-bold text-shadow mb-2">
        <i class="fa fa-sun-o text-sun mr-3"></i>å¤ªé˜³ç³»è¡Œæ˜Ÿè¿è¡Œæ¨¡æ‹Ÿå™¨
      </h1>
      <p class="text-xl text-blue-200">æ¢ç´¢å¤ªé˜³ç³»çš„å¥¥ç§˜ï¼Œäº†è§£è¡Œæ˜Ÿçš„è¿è¡Œè§„å¾‹</p>
    </header>

    <!-- ä¸»å†…å®¹åŒºåŸŸ -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
      <!-- å·¦ä¾§æ§åˆ¶é¢æ¿ -->
      <div class="lg:col-span-1 bg-gray-900 rounded-xl p-6 shadow-lg">
        <h2 class="text-2xl font-bold mb-6 text-center border-b border-blue-500 pb-2">
          <i class="fa fa-sliders mr-2"></i>æ—¶é—´æ§åˆ¶
        </h2>

        <!-- æ—¥æœŸè¾“å…¥ -->
        <div class="mb-6">
          <label class="block text-lg mb-2">é€‰æ‹©æ—¥æœŸ</label>
          <div class="flex flex-col md:flex-row gap-4">
            <input type="date" id="date-input" class="flex-1 bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 text-white">
            <button id="reset-date" class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg transition-colors">
              <i class="fa fa-refresh mr-1"></i>é‡ç½®ä¸ºä»Šå¤©
            </button>
          </div>
        </div>

        <!-- æ—¥æœŸæ»‘å— -->
        <div class="mb-6">
          <label class="block text-lg mb-2">æ—¶é—´æ»‘å—</label>
          <input type="range" id="time-slider" min="0" max="365" value="0" class="slider-track w-full mb-2">
          <div class="flex justify-between text-sm text-gray-400">
            <span>1æœˆ1æ—¥</span>
            <span>12æœˆ31æ—¥</span>
          </div>
        </div>

        <!-- å½“å‰æ—¥æœŸæ˜¾ç¤º -->
        <div class="mb-6 bg-gray-800 rounded-lg p-4">
          <h3 class="text-lg font-bold mb-2">å½“å‰æ¨¡æ‹Ÿæ—¥æœŸ</h3>
          <p id="current-date" class="text-xl text-blue-300 font-bold">2024å¹´1æœˆ1æ—¥</p>
        </div>

        <!-- æ§åˆ¶æŒ‰é’® -->
        <div class="flex flex-wrap gap-3 justify-center">
          <button id="zoom-in" class="bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg transition-colors">
            <i class="fa fa-search-plus mr-1"></i>æ”¾å¤§
          </button>
          <button id="zoom-out" class="bg-red-600 hover:bg-red-700 px-4 py-2 rounded-lg transition-colors">
            <i class="fa fa-search-minus mr-1"></i>ç¼©å°
          </button>
          <button id="reset-view" class="bg-yellow-600 hover:bg-yellow-700 px-4 py-2 rounded-lg transition-colors">
            <i class="fa fa-home mr-1"></i>é‡ç½®è§†å›¾
          </button>
        </div>
      </div>

      <!-- ä¸­é—´ç”»å¸ƒåŒºåŸŸ -->
      <div class="lg:col-span-2">
        <div class="bg-gray-900 rounded-xl p-4 md:p-6 shadow-lg">
          <h2 class="text-2xl font-bold mb-4 text-center border-b border-blue-500 pb-2">
            <i class="fa fa-globe mr-2"></i>å¤ªé˜³ç³»æ¨¡æ‹Ÿ
          </h2>
          
          <!-- ç”»å¸ƒå®¹å™¨ -->
          <div class="relative">
            <canvas id="solar-system-canvas" class="w-full h-[500px] md:h-[600px] bg-space rounded-lg"></canvas>
            <!-- åŠ è½½æŒ‡ç¤ºå™¨ -->
            <div id="loading" class="absolute inset-0 flex items-center justify-center bg-black bg-opacity-50 rounded-lg">
              <div class="text-2xl font-bold">æ­£åœ¨è®¡ç®—è¡Œæ˜Ÿä½ç½®...</div>
            </div>
          </div>

          <!-- æ“ä½œæç¤º -->
          <div class="mt-4 text-center text-sm text-gray-300">
            <p>ğŸ’¡ æç¤ºï¼šç‚¹å‡»è¡Œæ˜ŸæŸ¥çœ‹è¯¦ç»†ä¿¡æ¯ | æ‹–åŠ¨æ»‘å—æ”¹å˜æ—¥æœŸ | ä½¿ç”¨æŒ‰é’®ç¼©æ”¾è§†å›¾</p>
          </div>
        </div>
      </div>
    </div>

    <!-- è¡Œæ˜Ÿä¿¡æ¯åŒºåŸŸ -->
    <div id="planet-info" class="mt-8 bg-gray-900 rounded-xl p-6 shadow-lg hidden">
      <div class="flex justify-between items-center mb-4">
        <h2 class="text-2xl font-bold" id="planet-name">åœ°çƒ</h2>
        <button id="close-info" class="bg-gray-700 hover:bg-gray-600 p-2 rounded-full">
          <i class="fa fa-times"></i>
        </button>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div class="bg-gray-800 rounded-lg p-4">
          <h3 class="text-lg font-bold mb-2 text-blue-300">åŸºæœ¬ä¿¡æ¯</h3>
          <ul class="space-y-2">
            <li><strong>ä¸å¤ªé˜³è·ç¦»ï¼š</strong><span id="planet-distance">1.00 AU</span></li>
            <li><strong>è¿è¡Œå‘¨æœŸï¼š</strong><span id="planet-period">365.25 å¤©</span></li>
            <li><strong>ç›´å¾„ï¼š</strong><span id="planet-diameter">12,742 km</span></li>
            <li><strong>è¡¨é¢æ¸©åº¦ï¼š</strong><span id="planet-temperature">15Â°C</span></li>
          </ul>
        </div>
        <div class="bg-gray-800 rounded-lg p-4">
          <h3 class="text-lg font-bold mb-2 text-blue-300">è¶£å‘³çŸ¥è¯†</h3>
          <p id="planet-fact" class="text-gray-300">åœ°çƒæ˜¯å¤ªé˜³ç³»ä¸­å”¯ä¸€å·²çŸ¥å­˜åœ¨ç”Ÿå‘½çš„è¡Œæ˜Ÿï¼Œå®ƒè¡¨é¢æœ‰71%è¢«æ°´è¦†ç›–ï¼Œå› æ­¤ä»å¤ªç©ºçœ‹å‘ˆç°è“è‰²ã€‚</p>
        </div>
      </div>
    </div>

    <!-- æ•™è‚²ä¿¡æ¯åŒºåŸŸ -->
    <div class="mt-8 bg-gray-900 rounded-xl p-6 shadow-lg">
      <h2 class="text-2xl font-bold mb-4 text-center border-b border-blue-500 pb-2">
        <i class="fa fa-book mr-2"></i>å¤©æ–‡å°çŸ¥è¯†
      </h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
          <h3 class="text-xl font-bold mb-2 text-yellow-300">å¤ªé˜³ç³»çš„ç»„æˆ</h3>
          <p class="mb-4">å¤ªé˜³ç³»ç”±å¤ªé˜³ã€å…«å¤§è¡Œæ˜Ÿã€çŸ®è¡Œæ˜Ÿã€å«æ˜Ÿã€å°è¡Œæ˜Ÿå’Œå½—æ˜Ÿç»„æˆã€‚å…«å¤§è¡Œæ˜ŸæŒ‰ç…§ç¦»å¤ªé˜³çš„è·ç¦»ä»è¿‘åˆ°è¿œä¾æ¬¡æ˜¯ï¼šæ°´æ˜Ÿã€é‡‘æ˜Ÿã€åœ°çƒã€ç«æ˜Ÿã€æœ¨æ˜Ÿã€åœŸæ˜Ÿã€å¤©ç‹æ˜Ÿå’Œæµ·ç‹æ˜Ÿã€‚</p>
          <h3 class="text-xl font-bold mb-2 text-yellow-300">è¡Œæ˜Ÿè¿åŠ¨è§„å¾‹</h3>
          <p>è¡Œæ˜Ÿå›´ç»•å¤ªé˜³è¿è¡Œçš„è½¨é“æ˜¯æ¤­åœ†å½¢çš„ï¼Œå¤ªé˜³ä½äºæ¤­åœ†çš„ä¸€ä¸ªç„¦ç‚¹ä¸Šã€‚ç¦»å¤ªé˜³è¶Šè¿‘çš„è¡Œæ˜Ÿï¼Œè¿è¡Œé€Ÿåº¦è¶Šå¿«ï¼Œå…¬è½¬å‘¨æœŸè¶ŠçŸ­ã€‚</p>
        </div>
        <div>
          <h3 class="text-xl font-bold mb-2 text-yellow-300">ä»€ä¹ˆæ˜¯å¤©æ–‡å•ä½ï¼Ÿ</h3>
          <p class="mb-4">å¤©æ–‡å•ä½ï¼ˆAUï¼‰æ˜¯å¤©æ–‡å­¦ä¸­è®¡é‡å¤©ä½“ä¹‹é—´è·ç¦»çš„ä¸€ç§å•ä½ï¼Œå…¶æ•°å€¼å–åœ°çƒå’Œå¤ªé˜³ä¹‹é—´çš„å¹³å‡è·ç¦»ï¼Œçº¦ä¸º1.5äº¿å…¬é‡Œã€‚ä½¿ç”¨å¤©æ–‡å•ä½å¯ä»¥æ›´æ–¹ä¾¿åœ°è¡¨ç¤ºå¤ªé˜³ç³»ä¸­å¤©ä½“ä¹‹é—´çš„è·ç¦»ã€‚</p>
          <h3 class="text-xl font-bold mb-2 text-yellow-300">å†¥ç‹æ˜Ÿçš„æ•…äº‹</h3>
          <p>å†¥ç‹æ˜Ÿæ›¾ç»è¢«è®¤ä¸ºæ˜¯ç¬¬ä¹å¤§è¡Œæ˜Ÿï¼Œä½†åœ¨2006å¹´è¢«å›½é™…å¤©æ–‡å­¦è”åˆä¼šé‡æ–°åˆ†ç±»ä¸ºçŸ®è¡Œæ˜Ÿã€‚è¿™æ˜¯å› ä¸ºç§‘å­¦å®¶åœ¨å¤ªé˜³ç³»è¾¹ç¼˜å‘ç°äº†æ›´å¤šç±»ä¼¼å†¥ç‹æ˜Ÿå¤§å°çš„å¤©ä½“ã€‚</p>
        </div>
      </div>
    </div>
  </div>

  <!-- é¡µè„š -->
  <footer class="mt-12 text-center py-6 border-t border-gray-800">
    <p>Â© 2024 å¤ªé˜³ç³»è¡Œæ˜Ÿè¿è¡Œæ¨¡æ‹Ÿå™¨ - å°å­¦ç”Ÿæ•™å­¦ç‰ˆ</p>
    <p class="text-sm text-gray-400 mt-2">æ¢ç´¢å®‡å®™å¥¥ç§˜ï¼ŒåŸ¹å…»ç§‘å­¦å…´è¶£</p>
  </footer>

  <script>
    // è¡Œæ˜Ÿæ•°æ®
    const planets = [
      {
        name: "æ°´æ˜Ÿ",
        color: "#a9a9a9",
        distance: 0.387,
        period: 87.97,
        diameter: 4879,
        temperature: "-173Â°C è‡³ 427Â°C",
        fact: "æ°´æ˜Ÿæ˜¯å¤ªé˜³ç³»ä¸­æœ€å°çš„è¡Œæ˜Ÿï¼Œä¹Ÿæ˜¯ç¦»å¤ªé˜³æœ€è¿‘çš„è¡Œæ˜Ÿã€‚å®ƒè¡¨é¢å¸ƒæ»¡äº†é™¨çŸ³å‘ï¼Œçœ‹èµ·æ¥å¾ˆåƒæœˆçƒã€‚",
        size: 4
      },
      {
        name: "é‡‘æ˜Ÿ",
        color: "#e6c26e",
        distance: 0.723,
        period: 224.70,
        diameter: 12104,
        temperature: "462Â°C",
        fact: "é‡‘æ˜Ÿæ˜¯å¤ªé˜³ç³»ä¸­æœ€çƒ­çš„è¡Œæ˜Ÿï¼Œè¡¨é¢æ¸©åº¦é«˜è¾¾462Â°Cï¼Œè¶³ä»¥ç†”åŒ–é“…ã€‚å®ƒè¢«åšåšçš„å¤§æ°”å±‚åŒ…å›´ï¼Œä¸»è¦æˆåˆ†æ˜¯äºŒæ°§åŒ–ç¢³ã€‚",
        size: 6
      },
      {
        name: "åœ°çƒ",
        color: "#6495ed",
        distance: 1.000,
        period: 365.25,
        diameter: 12742,
        temperature: "-88Â°C è‡³ 58Â°C",
        fact: "åœ°çƒæ˜¯å¤ªé˜³ç³»ä¸­å”¯ä¸€å·²çŸ¥å­˜åœ¨ç”Ÿå‘½çš„è¡Œæ˜Ÿï¼Œå®ƒè¡¨é¢æœ‰71%è¢«æ°´è¦†ç›–ï¼Œå› æ­¤ä»å¤ªç©ºçœ‹å‘ˆç°è“è‰²ã€‚",
        size: 6
      },
      {
        name: "ç«æ˜Ÿ",
        color: "#ff6347",
        distance: 1.524,
        period: 686.98,
        diameter: 6779,
        temperature: "-153Â°C è‡³ 20Â°C",
        fact: "ç«æ˜Ÿè¢«ç§°ä¸º'çº¢è‰²æ˜Ÿçƒ'ï¼Œå› ä¸ºå®ƒè¡¨é¢å¯Œå«æ°§åŒ–é“ï¼ˆé“é”ˆï¼‰ã€‚ç«æ˜Ÿä¸Šæœ‰å¤ªé˜³ç³»ä¸­æœ€é«˜çš„å±±è„‰â€”â€”å¥¥æ—åŒ¹æ–¯å±±ï¼Œé«˜è¾¾22å…¬é‡Œã€‚",
        size: 5
      },
      {
        name: "æœ¨æ˜Ÿ",
        color: "#e6b88a",
        distance: 5.203,
        period: 4332.71,
        diameter: 139820,
        temperature: "-145Â°C",
        fact: "æœ¨æ˜Ÿæ˜¯å¤ªé˜³ç³»ä¸­æœ€å¤§çš„è¡Œæ˜Ÿï¼Œå®ƒçš„è´¨é‡æ˜¯å…¶ä»–æ‰€æœ‰è¡Œæ˜Ÿæ€»å’Œçš„2.5å€ã€‚æœ¨æ˜Ÿè¡¨é¢æœ‰ä¸€ä¸ªè‘—åçš„å¤§çº¢æ–‘ï¼Œæ˜¯ä¸€ä¸ªæŒç»­äº†å‡ ç™¾å¹´çš„å·¨å¤§é£æš´ã€‚",
        size: 12
      },
      {
        name: "åœŸæ˜Ÿ",
        color: "#f5deb3",
        distance: 9.539,
        period: 10759.50,
        diameter: 116460,
        temperature: "-178Â°C",
        fact: "åœŸæ˜Ÿä»¥å…¶ç¾ä¸½çš„ç¯ç³»è€Œé—»åï¼Œè¿™äº›ç¯ç”±æ— æ•°å°å†°å—å’Œå²©çŸ³ç¢ç‰‡ç»„æˆã€‚åœŸæ˜Ÿçš„å¯†åº¦éå¸¸å°ï¼Œå¦‚æœæœ‰ä¸€ä¸ªè¶³å¤Ÿå¤§çš„æ°´æ± ï¼ŒåœŸæ˜Ÿä¼šæ¼‚æµ®åœ¨æ°´é¢ä¸Šã€‚",
        size: 10
      },
      {
        name: "å¤©ç‹æ˜Ÿ",
        color: "#e0ffff",
        distance: 19.182,
        period: 30685.00,
        diameter: 50724,
        temperature: "-224Â°C",
        fact: "å¤©ç‹æ˜Ÿçš„è‡ªè½¬è½´ä¸å…¬è½¬è½¨é“å‡ ä¹å‚ç›´ï¼Œå°±åƒä¾§èººç€ç»•å¤ªé˜³å…¬è½¬ã€‚å®ƒæ˜¯ç¬¬ä¸€é¢—é€šè¿‡æœ›è¿œé•œå‘ç°çš„è¡Œæ˜Ÿã€‚",
        size: 8
      },
      {
        name: "æµ·ç‹æ˜Ÿ",
        color: "#4169e1",
        distance: 30.058,
        period: 60190.00,
        diameter: 49244,
        temperature: "-218Â°C",
        fact: "æµ·ç‹æ˜Ÿæ˜¯å¤ªé˜³ç³»ä¸­æœ€è¿œçš„è¡Œæ˜Ÿï¼Œå®ƒæœ‰ç€å¼ºçƒˆçš„é£æš´ï¼Œé£é€Ÿå¯è¾¾æ¯å°æ—¶2100å…¬é‡Œï¼Œæ˜¯å¤ªé˜³ç³»ä¸­é£é€Ÿæœ€å¿«çš„è¡Œæ˜Ÿã€‚",
        size: 7
      },
      {
        name: "å†¥ç‹æ˜Ÿ",
        color: "#d8bfd8",
        distance: 39.482,
        period: 90560.00,
        diameter: 2370,
        temperature: "-229Â°C",
        fact: "å†¥ç‹æ˜Ÿæ›¾ç»è¢«è®¤ä¸ºæ˜¯ç¬¬ä¹å¤§è¡Œæ˜Ÿï¼Œä½†åœ¨2006å¹´è¢«é‡æ–°åˆ†ç±»ä¸ºçŸ®è¡Œæ˜Ÿã€‚å®ƒæœ‰ä¸€ä¸ªå·¨å¤§çš„å«æ˜Ÿâ€”â€”å¡æˆï¼Œä¸¤è€…çš„å¤§å°ç›¸å·®ä¸å¤§ï¼Œå°±åƒä¸€å¯¹åŒè¡Œæ˜Ÿã€‚",
        size: 3
      }
    ];

    // å…¨å±€å˜é‡
    let canvas, ctx;
    let centerX, centerY;
    let scale = 1;
    let selectedDate = new Date();
    let animationId;

    // åˆå§‹åŒ–
    function init() {
      // è®¾ç½®å½“å‰æ—¥æœŸä¸ºé»˜è®¤å€¼
      const today = new Date().toISOString().split('T')[0];
      document.getElementById('date-input').value = today;
      document.getElementById('current-date').textContent = formatDate(selectedDate);

      // åˆå§‹åŒ–ç”»å¸ƒ
      canvas = document.getElementById('solar-system-canvas');
      ctx = canvas.getContext('2d');
      resizeCanvas();
      window.addEventListener('resize', resizeCanvas);

      // äº‹ä»¶ç›‘å¬
      document.getElementById('date-input').addEventListener('change', handleDateChange);
      document.getElementById('time-slider').addEventListener('input', handleSliderChange);
      document.getElementById('reset-date').addEventListener('click', resetDate);
      document.getElementById('zoom-in').addEventListener('click', () => zoom(1.2));
      document.getElementById('zoom-out').addEventListener('click', () => zoom(0.8));
      document.getElementById('reset-view').addEventListener('click', resetView);
      document.getElementById('close-info').addEventListener('click', closeInfo);

      // ç”»å¸ƒç‚¹å‡»äº‹ä»¶
      canvas.addEventListener('click', handleCanvasClick);

      // å¼€å§‹åŠ¨ç”»
      animate();
    }

    // è°ƒæ•´ç”»å¸ƒå¤§å°
    function resizeCanvas() {
      canvas.width = canvas.offsetWidth;
      canvas.height = canvas.offsetHeight;
      centerX = canvas.width / 2;
      centerY = canvas.height / 2;
      drawSolarSystem();
    }

    // æ ¼å¼åŒ–æ—¥æœŸ
    function formatDate(date) {
      const year = date.getFullYear();
      const month = String(date.getMonth() + 1).padStart(2, '0');
      const day = String(date.getDate()).padStart(2, '0');
      return `${year}å¹´${month}æœˆ${day}æ—¥`;
    }

    // å¤„ç†æ—¥æœŸå˜åŒ–
    function handleDateChange(e) {
      const dateStr = e.target.value;
      if (dateStr) {
        selectedDate = new Date(dateStr);
        updateSliderFromDate();
        document.getElementById('current-date').textContent = formatDate(selectedDate);
        drawSolarSystem();
      }
    }

    // å¤„ç†æ»‘å—å˜åŒ–
    function handleSliderChange(e) {
      const dayOfYear = parseInt(e.target.value);
      const date = new Date(selectedDate.getFullYear(), 0, dayOfYear);
      selectedDate = date;
      document.getElementById('date-input').value = date.toISOString().split('T')[0];
      document.getElementById('current-date').textContent = formatDate(selectedDate);
      drawSolarSystem();
    }

    // æ ¹æ®æ—¥æœŸæ›´æ–°æ»‘å—
    function updateSliderFromDate() {
      const startOfYear = new Date(selectedDate.getFullYear(), 0, 0);
      const diffTime = selectedDate - startOfYear;
      const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
      document.getElementById('time-slider').value = diffDays;
    }

    // é‡ç½®æ—¥æœŸä¸ºä»Šå¤©
    function resetDate() {
      selectedDate = new Date();
      const today = selectedDate.toISOString().split('T')[0];
      document.getElementById('date-input').value = today;
      updateSliderFromDate();
      document.getElementById('current-date').textContent = formatDate(selectedDate);
      drawSolarSystem();
    }

    // ç¼©æ”¾åŠŸèƒ½
    function zoom(factor) {
      scale *= factor;
      // é™åˆ¶ç¼©æ”¾èŒƒå›´
      scale = Math.max(0.1, Math.min(5, scale));
      drawSolarSystem();
    }

    // é‡ç½®è§†å›¾
    function resetView() {
      scale = 1;
      drawSolarSystem();
    }

    // è®¡ç®—è¡Œæ˜Ÿä½ç½®
    function calculatePlanetPosition(planet, date) {
      // è®¡ç®—ä»2000å¹´1æœˆ1æ—¥åˆ°ç»™å®šæ—¥æœŸçš„å¤©æ•°
      const epoch = new Date(2000, 0, 1);
      const diffTime = date - epoch;
      const diffDays = diffTime / (1000 * 60 * 60 * 24);
      
      // è®¡ç®—è¡Œæ˜Ÿçš„è½¨é“è§’åº¦
      const angle = (diffDays / planet.period) * Math.PI * 2;
      
      // è®¡ç®—è·ç¦»ï¼ˆç¼©æ”¾ä»¥é€‚åº”ç”»å¸ƒï¼‰
      const distance = planet.distance * 50 * scale;
      
      // è®¡ç®—åæ ‡
      const x = centerX + Math.cos(angle) * distance;
      const y = centerY + Math.sin(angle) * distance;
      
      return { x, y, angle, distance };
    }

    // ç»˜åˆ¶å¤ªé˜³ç³»
    function drawSolarSystem() {
      // æ¸…ç©ºç”»å¸ƒ
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      
      // ç»˜åˆ¶èƒŒæ™¯æ˜Ÿæ˜Ÿ
      drawStars();
      
      // ç»˜åˆ¶è½¨é“
      drawOrbits();
      
      // ç»˜åˆ¶å¤ªé˜³
      drawSun();
      
      // ç»˜åˆ¶è¡Œæ˜Ÿ
      drawPlanets();
    }

    // ç»˜åˆ¶æ˜Ÿæ˜Ÿ
    function drawStars() {
      ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';
      for (let i = 0; i < 200; i++) {
        const x = Math.random() * canvas.width;
        const y = Math.random() * canvas.height;
        const size = Math.random() * 2;
        ctx.beginPath();
        ctx.arc(x, y, size, 0, Math.PI * 2);
        ctx.fill();
      }
    }

    // ç»˜åˆ¶è½¨é“
    function drawOrbits() {
      planets.forEach(planet => {
        const radius = planet.distance * 50 * scale;
        ctx.beginPath();
        ctx.arc(centerX, centerY, radius, 0, Math.PI * 2);
        ctx.strokeStyle = 'rgba(100, 149, 237, 0.3)';
        ctx.lineWidth = 1;
        ctx.stroke();
      });
    }

    // ç»˜åˆ¶å¤ªé˜³
    function drawSun() {
      ctx.beginPath();
      ctx.arc(centerX, centerY, 15 * scale, 0, Math.PI * 2);
      ctx.fillStyle = '#ffcc00';
      ctx.fill();
      
      // å¤ªé˜³å…‰èŠ’
      ctx.strokeStyle = '#ffcc00';
      ctx.lineWidth = 2;
      for (let i = 0; i < 12; i++) {
        const angle = (i / 12) * Math.PI * 2;
        const startX = centerX + Math.cos(angle) * 15 * scale;
        const startY = centerY + Math.sin(angle) * 15 * scale;
        const endX = centerX + Math.cos(angle) * 25 * scale;
        const endY = centerY + Math.sin(angle) * 25 * scale;
        ctx.beginPath();
        ctx.moveTo(startX, startY);
        ctx.lineTo(endX, endY);
        ctx.stroke();
      }
    }

    // ç»˜åˆ¶è¡Œæ˜Ÿ
    function drawPlanets() {
      planets.forEach(planet => {
        const pos = calculatePlanetPosition(planet, selectedDate);
        
        // ä¿å­˜è¡Œæ˜Ÿä½ç½®ç”¨äºç‚¹å‡»æ£€æµ‹
        planet.x = pos.x;
        planet.y = pos.y;
        planet.radius = planet.size * scale;
        
        // ç»˜åˆ¶è¡Œæ˜Ÿ
        ctx.beginPath();
        ctx.arc(pos.x, pos.y, planet.size * scale, 0, Math.PI * 2);
        ctx.fillStyle = planet.color;
        ctx.fill();
        ctx.strokeStyle = 'rgba(255, 255, 255, 0.5)';
        ctx.lineWidth = 1;
        ctx.stroke();
        
        // ä¸ºåœŸæ˜Ÿç»˜åˆ¶ç¯
        if (planet.name === 'åœŸæ˜Ÿ') {
          ctx.beginPath();
          ctx.ellipse(pos.x, pos.y, planet.size * scale * 1.8, planet.size * scale * 0.6, 0, 0, Math.PI * 2);
          ctx.strokeStyle = 'rgba(245, 222, 179, 0.8)';
          ctx.lineWidth = 2;
          ctx.stroke();
        }
      });
    }

    // å¤„ç†ç”»å¸ƒç‚¹å‡»
    function handleCanvasClick(e) {
      const rect = canvas.getBoundingClientRect();
      const clickX = e.clientX - rect.left;
      const clickY = e.clientY - rect.top;
      
      // æ£€æŸ¥æ˜¯å¦ç‚¹å‡»äº†è¡Œæ˜Ÿ
      for (const planet of planets) {
        if (planet.x && planet.y) {
          const distance = Math.sqrt((clickX - planet.x) ** 2 + (clickY - planet.y) ** 2);
          if (distance <= planet.radius * 2) {
            showPlanetInfo(planet);
            return;
          }
        }
      }
    }

    // æ˜¾ç¤ºè¡Œæ˜Ÿä¿¡æ¯
    function showPlanetInfo(planet) {
      document.getElementById('planet-name').textContent = planet.name;
      document.getElementById('planet-distance').textContent = `${planet.distance.toFixed(3)} AU`;
      document.getElementById('planet-period').textContent = `${planet.period.toFixed(2)} å¤©`;
      document.getElementById('planet-diameter').textContent = `${planet.diameter.toLocaleString()} km`;
      document.getElementById('planet-temperature').textContent = planet.temperature;
      document.getElementById('planet-fact').textContent = planet.fact;
      document.getElementById('planet-info').classList.remove('hidden');
    }

    // å…³é—­ä¿¡æ¯é¢æ¿
    function closeInfo() {
      document.getElementById('planet-info').classList.add('hidden');
    }

    // åŠ¨ç”»å¾ªç¯
    function animate() {
      drawSolarSystem();
      animationId = requestAnimationFrame(animate);
    }

    // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
    window.addEventListener('load', () => {
      // éšè—åŠ è½½æŒ‡ç¤ºå™¨
      setTimeout(() => {
        document.getElementById('loading').style.display = 'none';
        init();
      }, 1000);
    });
  </script>
</body>
</html>